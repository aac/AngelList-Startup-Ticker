<html>
<head>
  <meta charset="utf-8">
  <title>AngelList Startup Ticker</title>
  <meta name="description" content="">
  <meta name="author" content="">
  <link rel="stylesheet" href="bootstrap.css">
  <style type="text/css">
    body {
        padding-top: 60px; /* 40px to make the container go all the way to the bottom of the topbar */
    }
    .topbar-inner, .topbar .fill {
        background-color: #F2F3F4;
        background-image: none;
    }
    .topbar h3 a, .topbar .brand {
        color: black;
    }
  </style>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
  <script src="/socket.io/socket.io.js"></script>
  <script>
    $(document).ready(function(){
      var socket = io.connect('http://localhost:3000');
      socket.on('startup', function (startup) {
        var a = $(document.createElement('a')).attr("href",startup.angellist_url);;
        var li = document.createElement('li');

        var img = $(document.createElement('img')).attr("class","thumbnail");
        img.load(function(){
          $(this).hide();
          var w = this.width;
          var h = this.height;
          var adjH = Math.floor(h*90/w);
          var marginHeight = 0;
          if (adjH < 90) {
	    marginHeight = Math.ceil((90 - adjH)/2.0);
	  }
          $(a).append(this);
	  $(li).append(a);
	  $(".media-grid").prepend(li);

          $(this).attr("width", "90");
	  $(this).attr("height", adjH);
	  $(this).css("padding", marginHeight + "px 0px " + (90 - adjH - marginHeight) + "px");
	  $(this).show();
        });
        img.attr("src",startup.logo_url);
      });
    });
  </script>
</head>
<body>
  <div class="topbar">
    <div class="fill">
      <div class="container">
        <a class="brand" href="#">AngelList Startups</a>
      </div>
    </div>
  </div>
  <div class="container">
    <ul class="media-grid" />
  </div>
</body>
</html>
